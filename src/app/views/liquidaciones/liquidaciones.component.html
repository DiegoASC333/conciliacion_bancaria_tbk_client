<h1 class="mb-4">Liquidaciones {{ titulo }}</h1>

<c-container fluid>
  <div>
    <button cButton color="primary" (click)="Exportar()">Exportar a excel</button>
  </div>
  <!-- Tabla de liquidaciones -->
  <app-custom-table [items]="liquidacionesTbk"></app-custom-table>
  <!-- Totales en formato horizontal -->
  <div *ngIf="totalesPorComercio?.length > 0" class="totales-horizontal mb-4">
    <table class="totales-table w-100">
      <tbody>
        <!-- Fila de códigos de comercio -->
        <tr>
          <th scope="row">Código de Comercio</th>
          <td *ngFor="let total of totalesPorComercio">
            {{ total.NOMBRE_COMERCIO }}
          </td>
        </tr>

        <!-- Fila de montos -->
        <tr>
          <th scope="row">Monto Total</th>
          <td *ngFor="let total of totalesPorComercio" class="text-end">
            {{ total.TOTAL_MONTO | currency: 'CLP' : 'symbol-narrow' : '1.0-0' }}
          </td>
        </tr>
        <tr class="fw-bold">
          <th scope="row">TOTAL GENERAL</th>
          <td [attr.colspan]="totalesPorComercio.length" class="text-end">
            {{ totalGeneral | currency: 'CLP' : 'symbol-narrow' : '1.0-0' }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Botón -->
  <div class="mt-3">
    <button cButton color="primary">Validar a Contabilidad</button>
  </div>
</c-container>
